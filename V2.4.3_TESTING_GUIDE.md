# v2.4.3 測試指南 - 寒暄場景修正驗證

📅 **創建日期**：2025-01-24  
🎯 **測試目標**：驗證「你好」寒暄場景的 AI 客戶角色定位修正  
⚠️ **重要**：請確保清除瀏覽器緩存後再測試

---

## 🔄 測試前準備

### 1. 清除瀏覽器緩存（必須！）

**為什麼需要清除緩存？**
- 前端 JavaScript 文件 (`app.js`) 可能被瀏覽器緩存
- 即使後端已更新，舊的緩存文件仍會導致錯誤行為

**清除方法**：

#### Chrome / Edge
1. 按 `Ctrl + Shift + Delete`（Mac: `Cmd + Shift + Delete`）
2. 選擇「時間範圍」→「過去 1 小時」
3. 勾選「快取圖片和檔案」
4. 點擊「清除資料」

#### 或使用強制刷新
1. 打開網站後，按 `Ctrl + Shift + R`（Mac: `Cmd + Shift + R`）
2. 這會跳過緩存，直接從服務器載入最新文件

### 2. 確認系統版本

- 登錄後，檢查系統是否顯示 v2.4.3
- 如果看不到版本號，請檢查頁面底部或控制台日誌

---

## 🧪 測試場景

### 測試 1️⃣：練習模式 - 簡單寒暄

**目的**：驗證練習模式的寒暄處理

**步驟**：
1. 進入「練習模式」
2. 選擇任意身體部位（例如：頸部）
3. 選擇任意客戶角色（例如：IT programmer Mr. 張）
4. 進入對話頁面
5. **您輸入**：`你好`
6. 觀察 AI 客戶的回應

**✅ 預期正確回應**：
- `你好`
- `你好，治療師`
- `你好`（然後等待，沒有其他內容）

**❌ 錯誤回應（不應出現）**：
- `你好！請問有什麼可以幫到您的嗎？`
- `是來咨詢XX疼痛的問題嗎？`
- `需要什麼服務？`
- 任何包含「幫到您」「咨詢」「服務」的內容

**記錄結果**：
- [ ] ✅ 回應正確
- [ ] ❌ 回應錯誤（請記錄具體內容）

---

### 測試 2️⃣：面試模式 - 簡單寒暄

**目的**：驗證面試模式的寒暄處理（您報告的問題場景）

**步驟**：
1. 返回主頁
2. 進入「面試模式」
3. 點擊「開始面試」
4. 系統會隨機抽取身體部位和客戶角色
5. 確認抽卡後，進入對話頁面
6. **您輸入**：`你好`
7. 觀察 AI 客戶的回應

**✅ 預期正確回應**：
- `你好`
- `你好，治療師`
- `你好`（然後等待，沒有其他內容）

**❌ 錯誤回應（不應出現）**：
- `你好！請問有什麼可以幫到您的嗎？`
- `是來咨詢腳部疼痛的問題嗎？`
- `需要什麼服務？`
- 任何包含「幫到您」「咨詢」「服務」的內容

**記錄結果**：
- [ ] ✅ 回應正確
- [ ] ❌ 回應錯誤（請記錄具體內容）

---

### 測試 3️⃣：練習模式 - 稍長寒暄

**步驟**：
1. 進入「練習模式」
2. 選擇任意場景
3. **您輸入**：`你好，請坐`
4. 觀察 AI 客戶的回應

**✅ 預期正確回應**：
- `好的，謝謝`
- `謝謝`
- `多謝`（簡短禮貌回應）

**❌ 錯誤回應（不應出現）**：
- `需要什麼幫助嗎？`
- `您哪裡不舒服？`

---

### 測試 4️⃣：面試模式 - 稍長寒暄

**步驟**：
1. 進入「面試模式」
2. 開始面試
3. **您輸入**：`你好，請坐`
4. 觀察 AI 客戶的回應

**✅ 預期正確回應**：
- `好的，謝謝`
- `謝謝`
- `多謝`（簡短禮貌回應）

**❌ 錯誤回應（不應出現）**：
- `需要什麼幫助嗎？`
- `您哪裡不舒服？`

---

### 測試 5️⃣：正常對話流程（對照測試）

**目的**：確認正常提問場景不受影響

**步驟**：
1. 進入任意模式（練習或面試）
2. **您輸入**：`你好，請問邊個部位唔舒服？`
3. 觀察 AI 客戶的回應

**✅ 預期正確回應**：
- `我頸痛...` （根據選擇的身體部位）
- `我腰痛已經兩個月了...`
- 回答具體的痛症情況

**❌ 錯誤回應（不應出現）**：
- `你好`（只回答寒暄，沒有回答問題）
- `需要什麼幫助？`（反問）

---

## 📊 測試結果記錄表

請完成測試後填寫：

| 測試編號 | 模式 | 您的輸入 | AI 客戶回應 | 結果 |
|---------|------|---------|------------|------|
| 1️⃣ | 練習 | 你好 | ________________ | ✅ / ❌ |
| 2️⃣ | 面試 | 你好 | ________________ | ✅ / ❌ |
| 3️⃣ | 練習 | 你好，請坐 | ________________ | ✅ / ❌ |
| 4️⃣ | 面試 | 你好，請坐 | ________________ | ✅ / ❌ |
| 5️⃣ | 任意 | 你好，請問邊個部位唔舒服？ | ________________ | ✅ / ❌ |

---

## 🔍 如果測試仍然失敗

### 情況 A：練習模式正確，面試模式錯誤

**可能原因**：
1. **瀏覽器緩存未清除**：請使用 `Ctrl + Shift + R` 強制刷新
2. **對話歷史影響**：請完全關閉瀏覽器標籤頁，重新打開
3. **Session 緩存**：請退出登錄，重新登錄

**排查步驟**：
```
1. 完全關閉瀏覽器標籤頁
2. 清除瀏覽器緩存（Ctrl + Shift + Delete）
3. 重新打開網站
4. 登錄（密碼：Aileen!2025）
5. 直接進入面試模式測試
```

### 情況 B：兩種模式都仍然錯誤

**可能原因**：
1. **AI 模型固有行為**：DeepSeek 模型在某些情況下可能仍會越界
2. **提示詞權重不夠**：需要進一步強化提示詞或降低溫度參數

**請提供以下信息**：
1. **完整對話截圖**（包含您的輸入和 AI 回應）
2. **選擇的客戶角色**（例如：IT programmer Mr. 張）
3. **選擇的身體部位**（例如：頸部）
4. **模式**（練習 / 面試）
5. **是否清除了瀏覽器緩存**

---

## 🛠️ 進階調試（如需要）

### 查看瀏覽器控制台日誌

1. 按 `F12` 打開開發者工具
2. 切換到「Console」標籤
3. 進行測試
4. 查找包含 `[Chat]` 的日誌信息
5. 截圖並提供給開發者

**關鍵日誌信息**：
- `[Chat] New message (bodyPart: XX, role: XX)` ← 確認參數是否正確
- `[Chat] AI response generated` ← 確認 AI 回應已生成

---

## 💡 預期行為總結

### 正確的 AI 客戶行為邏輯

| 治療師輸入 | AI 客戶應該 | AI 客戶不應該 |
|-----------|------------|--------------|
| `你好` | 簡短回應「你好」，等待 | ❌ 問「有什麼可以幫到您」 |
| `你好，請坐` | 禮貌回應「謝謝」，等待 | ❌ 問「需要什麼服務」 |
| `你好，邊個部位痛？` | 回答具體情況「我頸痛...」 | ❌ 只說「你好」不回答 |

### 核心原則

1. **寒暄場景**：簡短回應 + 等待治療師詢問
2. **提問場景**：回答治療師的問題
3. **絕不主動**：永遠不問治療師「需要什麼」或「哪裡痛」
4. **身份清晰**：你是來看病的客戶，不是接待客人的治療師

---

## 📞 反饋方式

**如果測試發現問題**，請提供：

1. ✅ **測試結果表格**（填寫完整）
2. 📸 **錯誤對話截圖**（特別是面試模式）
3. 📋 **具體場景信息**（客戶角色、身體部位）
4. ✔️ **確認已清除瀏覽器緩存**

**提供這些信息後，我可以**：
- 進一步強化提示詞的特定場景
- 調整 AI 模型參數（例如降低溫度）
- 添加前端預處理邏輯（過濾特定錯誤回應）

---

**測試網址**：https://3000-ie1fo5xzwsbm2hrnzrtmw-cbeee0f9.sandbox.novita.ai  
**密碼**：`Aileen!2025`  
**版本**：v2.4.3  
**重建時間**：2025-01-24 09:30

祝測試順利！期待您的反饋！😊
